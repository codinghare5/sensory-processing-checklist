---
layout: layouts/base.njk
permalink: /survey/
eleventyNavigation:
  key: Survey
  order: 5
---

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <button 
      class="nav-link active" 
      id="home-tab" 
      data-bs-toggle="tab" 
      data-bs-target="#home" 
      type="button" 
      role="tab" 
      aria-controls="home" 
      aria-selected="true">Vision</button>
  </li>
  <li class="nav-item" role="presentation">
    <button 
      class="nav-link" 
      id="profile-tab" 
      data-bs-toggle="tab" 
      data-bs-target="#profile" 
      type="button" 
      role="tab" 
      aria-controls="profile" 
      aria-selected="false">Hearing</button>
  </li>
  <li class="nav-item" role="presentation">
    <button 
    class="nav-link" 
    id="contact-tab" 
    data-bs-toggle="tab" 
    data-bs-target="#contact" 
    type="button" 
    role="tab" 
    aria-controls="contact" 
    aria-selected="false">Taste</button>
  </li>
</ul>
<div class="tab-content mt-5" id="myTabContent">
  <div class="tab-pane fade show active" 
    id="home" 
    role="tabpanel" 
    aria-labelledby="home-tab">
    <article>
      <h2>Sensory Processing Checklist</h2>

      <!-- straight forward checkboxes -->
      <h4>1. Lorem ipsum dolor sit amet consectetur, adipisicing elit?</h4>
      <div class="container">
        <div class="row">
          <div class="col form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1">
            <label class="form-check-label" for="inlineRadio1">Was true</label>
          </div>
          <div class="col form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2" value="option2">
            <label class="form-check-label" for="inlineRadio2">True Now</label>
          </div>
        </div>
        <div class="row">
          <div class="col form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3" value="option3">
            <label class="form-check-label" for="inlineRadio3">False</label>
          </div>
          <div class="col form-check form-check-inline">
            <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio4" value="option4" checked>
            <label class="form-check-label" for="inlineRadio4">Not sure</label>
          </div>
        </div> <!-- end row for checkboxes -->
      </div> <!-- end container for checkboxes -->

      <!-- Three sets of radio buttons, two with just one item -->
      <h4>2. Lorem ipsum dolor sit amet consectetur, adipisicing elit?</h4>
      <div class="container">
      {% set option = "O2" %}
        <div class="row row-cols-auto justify-content-center">
        {# Radio - Not Sure #}
        <div class="form-check form-check-inline col">
          <input class="form-check-input" type="radio" 
          name="{{ option }}-notsure" 
          id="{{ option }}-notsure" 
          value="notsure">
          <label class="form-check-label" for="{{ option }}-notsure">Not sure</label>
        </div>
        {# Radio - Was True #}
        <div class="form-check form-check-inline col">
          <input class="form-check-input" type="radio" 
            name="{{ option }}-wastrue" 
            id="{{ option }}-wastrue" 
            value="wastrue">
          <label class="form-check-label" for="{{ option }}-wastrue">Was true</label>
        </div>
        {# Radio - True #}
        <div class="form-check form-check-inline col">
          <input class="form-check-input" type="radio" 
            name="{{ option }}" 
            id="{{ option }}-true" 
            value="true">
          <label class="form-check-label" for="{{ option }}-true">True Now</label>
        </div>
        {# Radio - False #}
        <div class="form-check form-check-inline col">
          <input class="form-check-input" type="radio" 
          name="{{ option }}" 
          id="{{ option }}-false" 
          value="false" checked>
          <label class="form-check-label" for="{{ option }}-false">False</label>
        </div>
      </div> <!-- end row -->
      </div> <!-- end container for checkboxes -->

      <!-- buttons and javascript -->
      {% set options = [ {"label": "Was True", "id": "was-true", "value": 2},
                         {"label": "True Now", "id": "true-now", "value": 3},
                         {"label": "Not Sure", "id": "not-sure", "value": 1},
                         {"label": "False", "id": "false", "value": 0}] %}
      {% set questionName = "vision-01-02" %}
      <h4>3. Lorem ipsum dolor sit amet consectetur, adipisicing elit?</h4>
      <div class="container">
       <div class="row row-cols-auto justify-content-center">
        <!-- create buttons -->
        <form id="{{ questionName }}" value=0>
          {% for item in options %}
            <button class="questionButton px-2 m-1 {% if item.id == "false" %} active-btn {% endif %}" 
                              id="{{ questionName }}-{{ item.id }}" name="{{ questionName }}"
                              type="button" value={{ item.value }}>
              {{ item.label }}
            </button>
          {% endfor %}
        </form>
       </div> <!-- end row -->
      </div> <!-- end container-->

    </article>  
  </div>

  <div class="tab-pane fade" 
    id="profile" 
    role="tabpanel" 
    aria-labelledby="profile-tab">
    Lorem ipsum dolor sit amet consectetur, adipisicing elit. 
    Voluptatum assumenda soluta nulla animi nesciunt numquam 
    doloremque quo id ratione repellat fugit aspernatur, cumque et illum. 
    Nesciunt odio delectus nam aperiam praesentium veniam modi. 
    Voluptas dolores perspiciatis, hic veniam quidem molestias vitae debitis voluptatibus. 
    Perspiciatis, necessitatibus tenetur? Commodi sed repellendus porro! 
    Dolorum iure, distinctio, minima est voluptatum totam nesciunt autem dolores aliquid, 
    fugit libero facere quisquam veritatis quia error! Id incidunt natus autem quod modi! 
    Fuga dignissimos harum natus ipsum velit sit inventore 
    voluptatum mollitia eum provident dolorem aliquid, 
    iusto officia dolores porro suscipit aliquam repellendus accusamus placeat expedita. 
    Animi voluptatum quibusdam dicta labore nemo nulla, 
    cumque numquam molestias hic doloribus recusandae sed odit earum amet eligendi quas. 
    Laudantium perferendis labore ratione autem a corrupti possimus nesciunt facere minima tenetur! 
    Officia nobis aliquam vitae repudiandae alias perspiciatis nisi voluptatem facere qui nemo. 
    In accusamus rerum doloribus, distinctio ullam a minima dolores.
  </div>
  <div class="tab-pane fade" 
    id="contact" 
    role="tabpanel" 
    aria-labelledby="contact-tab">
    Lorem ipsum dolor sit amet consectetur, adipisicing elit. 
    Voluptatum assumenda soluta nulla animi nesciunt numquam 
    doloremque quo id ratione repellat fugit aspernatur, cumque et illum. 
    Nesciunt odio delectus nam aperiam praesentium veniam modi. 
    Voluptas dolores perspiciatis, hic veniam quidem molestias vitae debitis voluptatibus. 
    Perspiciatis, necessitatibus tenetur? Commodi sed repellendus porro! 
    Dolorum iure, distinctio, minima est voluptatum totam nesciunt autem dolores aliquid, 
    fugit libero facere quisquam veritatis quia error! Id incidunt natus autem quod modi! 
    Fuga dignissimos harum natus ipsum velit sit inventore 
    voluptatum mollitia eum provident dolorem aliquid, 
    iusto officia dolores porro suscipit aliquam repellendus accusamus placeat expedita. 
    Animi voluptatum quibusdam dicta labore nemo nulla, 
    cumque numquam molestias hic doloribus recusandae sed odit earum amet eligendi quas. 
    Laudantium perferendis labore ratione autem a corrupti possimus nesciunt facere minima tenetur! 
    Officia nobis aliquam vitae repudiandae alias perspiciatis nisi voluptatem facere qui nemo. 
    In accusamus rerum doloribus, distinctio ullam a minima dolores.
  </div>
</div>
<div class="w-100">
  <div class="progress w-75 position-relative top-0 start-50 translate-middle-x">
    <div class="progress-bar w-75 progress-bar-striped progress-bar-purple" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
</div>

<script>
  // grab all the buttons with class 'questionButton'
  const questionButtons = document.querySelectorAll(".questionButton")
  console.log('there are ' + questionButtons.length + ' question buttons')

  // loop through buttons setting an event listener
  for (i=0 ; i<questionButtons.length ; i++) {
    questionButtons[i].addEventListener('click', function() {
      console.log(this.getAttribute("id"));
      const formwrapper = document.getElementById(this.getAttribute("name"));
      var currentvalue = formwrapper.getAttribute("value");
      const thisvalue = this.getAttribute("value");
      const buttons = formwrapper.getElementsByTagName("button");
      const falsebutton = buttons[3];
      const notsurebutton = buttons[2]
      const truebutton = buttons[1];
      const wastruebutton = buttons[0];

      var newvalue;
      if (this.classList.contains("active-btn")) {
        if (this !== falsebutton) { // if false button do nothing else
          this.classList.remove("active-btn");
          newvalue = +currentvalue - +thisvalue; //+thisvalue converts thisvalue to an int

          if (newvalue == 0){ // no buttons are active
            falsebutton.classList.add("active-btn");
            formwrapper.setAttribute("value",0);
          }
          else { // one other button is active (can't be more than one)
            formwrapper.setAttribute("value",newvalue);
          }
        } 
      }
      else { // the button was not active
        if (this === falsebutton) {
          formwrapper.setAttribute("value",0);
          for (j=0; j<buttons.length - 1 ; j++)
            buttons[j].classList.remove("active-btn");
        }
        else {
          falsebutton.classList.remove("active-btn")
          if (this === notsurebutton) {
            truebutton.classList.remove("active-btn");
            wastruebutton.classList.remove("active-btn");
            formwrapper.setAttribute("value",1);
          }
          else { // button is either wastruebutton or nowtruebutton
            if (notsurebutton.classList.contains("active-btn")){
              notsurebutton.classList.remove("active-btn");
              currentvalue = 0;
            }
            newvalue = +currentvalue + +thisvalue;
            console.log('currentvalue: ' + currentvalue + ' thisvalue: ' + thisvalue + ' newvalue: ' + newvalue);
            formwrapper.setAttribute("value",newvalue)
          }
        }
        this.classList.add("active-btn"); 
      } 
      console.log('form value:' + formwrapper.getAttribute("value")) 
    }); // end function definition
  } // end loop through buttons

  console.log('added event listeners')
</script>
